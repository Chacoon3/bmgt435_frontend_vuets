import{u as S,a as j,b as F,c as J}from"./groupUtils-c7f69d46.js";import{d as f,o as t,c as e,b as i,t as _,E as A,q as C,F as m,A as $,_ as B,n as E,e as b,p as U,a as q,r as z,l as L,f as a}from"./index-9f37afb8.js";const Y={id:"groupItemContainer"},H={class:"groupName"},K=["disabled"],O={class:"groupUserList"},P={key:0},Q={key:1},R=f({__name:"GroupItem",props:{group:{},buttonConfig:{}},setup(r){return(o,l)=>{var c;return t(),e("div",Y,[i("span",H,_(o.group.name),1),o.buttonConfig?(t(),e("button",{key:0,class:A(o.buttonConfig.htmlClass),disabled:o.buttonConfig.disabled(),onClick:l[0]||(l[0]=(...n)=>o.buttonConfig.onClick&&o.buttonConfig.onClick(...n))},_((c=o.buttonConfig)==null?void 0:c.text),11,K)):C("",!0),i("ul",O,[o.group.users.length>0?(t(),e("div",P,[(t(!0),e(m,null,$(o.group.users,n=>(t(),e("li",{class:"groupUser",key:n.id},_(n==null?void 0:n.first_name)+" "+_(n==null?void 0:n.last_name),1))),128))])):(t(),e("div",Q," Group is empty "))])])}}});const I=B(R,[["__scopeId","data-v-eac14979"]]),T=i("h3",null,"Group List",-1),W=f({__name:"GroupList",props:{groupList:{},buttonConfig:{}},setup(r){return(o,l)=>(t(),e(m,null,[T,(t(!0),e(m,null,$(o.groupList,(c,n)=>(t(),E(I,{key:n,group:c,"button-config":o.buttonConfig[n]},null,8,["group","button-config"]))),128))],64))}}),X=r=>(U("data-v-4b9ed756"),r=r(),q(),r),Z=X(()=>i("h3",null,"Your Group",-1)),x=f({__name:"MyGroup",props:{group:{},buttonConfig:{}},setup(r){return(o,l)=>(t(),e(m,null,[Z,b(I,{group:o.group,"button-config":o.buttonConfig},null,8,["group","button-config"])],64))}});const oo=B(x,[["__scopeId","data-v-4b9ed756"]]),to={class:"contentViewContainer"},no={key:0,class:"groupDiv"},eo=i("h2",null,"Fetching Data...",-1),uo=[eo],so={key:1},ao={key:0},ro={key:1},io=["disabled"],_o=f({__name:"GroupView",setup(r){const o=z({show:!1,msg:""}),{isJoiningGroup:l,joinGroup:c}=S(),{isCurrentGroupLoading:n,currentGroup:g,getCurrrentGroup:h}=J(),{isLeavingGroup:v,leaveGroup:w}=j(),{isLoading:lo,data:G,getData:p,reset:y,hasMore:k}=F();h(),p();function D(){w(u=>{u.status===200?(o.msg=(u==null?void 0:u.data)??"leave group success!",h(),y(),p()):o.msg=(u==null?void 0:u.data)??"leave group failed!",o.show=!0})}const M={text:L(()=>v.value===!0?"Leaving...":"Leave Group").value,htmlClass:"normalButton",disabled:()=>v.value===!0,onClick:D};function V(u){var d;return((d=g.value)==null?void 0:d.id)===u?null:{text:"Join",htmlClass:"normalButton",disabled:()=>l.value===!0,onClick:()=>{c(u,s=>{s.status===200?(o.msg=(s==null?void 0:s.data)??"join group success!",h(),y(),p()):o.msg=(s==null?void 0:s.data)??"join group failed!",o.show=!0})}}}const N=L(()=>Array.from(G.value,u=>V(u.id)));return(u,d)=>(t(),e("div",to,[a(n)?(t(),e("div",no,uo)):(t(),e("div",so,[a(g)!==null?(t(),e("div",ao,[b(oo,{group:a(g),"button-config":M},null,8,["group"])])):C("",!0),a(g)!==null?(t(),e("hr",ro)):C("",!0),i("div",null,[b(W,{"group-list":a(G),"button-config":N.value},null,8,["group-list","button-config"]),i("button",{class:"normalButton",disabled:a(k)===!1,onClick:d[0]||(d[0]=(...s)=>a(p)&&a(p)(...s))},_(a(k)?"View more":"No more groups"),9,io)])]))]))}});export{_o as default};
