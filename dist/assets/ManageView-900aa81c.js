import{a as P}from"./caseUtils-39780e21.js";import{d as S,j as y,o as s,c as l,F as L,A as M,b as u,t as b,q as U,_ as k,H as Y,J as x,K,L as $,M as O,N as R,r as I,e as g,f as h,g as E,I as T,l as V,O as j,E as q,n as w,P as z,p as J,a as Q}from"./index-3cf7f63b.js";import{T as W}from"./TableView-c2803483.js";import{d as X}from"./groupUtils-795664b8.js";import"./caseRecordsUtils-afc83ad9.js";const Z=["flexDir"],ee=["selectState","onClick"],te={key:0,class:"customSelectOptionDiv"},se=["onClick"],oe=S({__name:"CustomSelectGroup",props:{selectConfigs:{},flexDirection:{}},emits:["update:value"],setup(a){const e=a,t=y(Array.from(e.selectConfigs,()=>!1));function n(o){t.value[o]===!0?t.value[o]=!1:t.value.forEach((c,d)=>{t.value[d]=d===o})}return(o,c)=>(s(),l("div",{id:"customSelectGroupDiv",flexDir:o.$props.flexDirection??"column"},[(s(!0),l(L,null,M(o.selectConfigs,(d,r)=>(s(),l("div",{class:"customSelectContainer",key:r},[u("button",{class:"normalButton",selectState:t.value[r],onClick:()=>n(r)},b(d.name),9,ee),t.value[r]===!0?(s(),l("div",te,[(s(!0),l(L,null,M(d.options,(p,i)=>(s(),l("div",{key:i},[u("button",{class:"customSelectOptionButton",onClick:()=>{o.$emit("update:value",p),t.value[r]=!1}},b(p),9,se)]))),128))])):U("",!0)]))),128))],8,Z))}});const ne=k(oe,[["__scopeId","data-v-5c7ae957"]]),ae={};function re(a,e){return s(),l("div")}const le=k(ae,[["render",re]]),{clearCacheByEndpoint:A}=Y();function ue(){const a=y(!1);function e(t,n,o){a.value!==!0&&(a.value=!0,t.stream().getReader().read().then(c=>{O(`${$.manage.user.import}/semester/${n}`,c.value,d=>{a.value=!1,d.status===200&&A($.manage.user.view),o==null||o(d)})}))}return{importUsers:e,isLoading:a}}function ie(){return K($.manage.user.view,10)}const D=y(!1),N=y([]);function H(){D.value!==!0&&(D.value=!0,x($.manage.semester.all,null,a=>{D.value=!1,a.status===200?N.value=a.data:N.value=[]}))}function ce(a,e,t){O($.manage.semester.create,{year:a,season:e},n=>{t==null||t(n)})}H();function F(){return{isLoadingSemesters:D,semesters:N,getSemesters:H,createSemester:ce,clearCache:()=>A($.manage.semester.all)}}const de={class:"customDropdown"},pe=["value"],me=S({__name:"CustomDropdown",props:{config:{}},emits:["update:value"],setup(a){return R(e=>({"6399337a":e.config.width??"12.5em"})),(e,t)=>(s(),l("div",de,[u("label",null,b(e.config.name),1),u("select",{autocomplete:"off",onChange:t[0]||(t[0]=n=>e.$emit("update:value",n.target.value))},[(s(!0),l(L,null,M(e.config.options,(n,o)=>{var c;return s(),l("option",{key:o,class:"customOption",value:((c=e.config.values)==null?void 0:c[o])??null},b(n),9,pe)}),128))],32)]))}});const G=k(me,[["__scopeId","data-v-4ab4bc71"]]),fe=u("h3",null,"Import User",-1),_e=u("p",null,"Please select and upload a CSV file to import users",-1),ve=u("p",null,'The CSV file should contain the following columns: "user_first_name", "user_last_name", "directory_id"',-1),ge=["onSubmit"],Ce=u("div",null,[u("input",{id:"importUserFile",type:"file",accept:".csv"})],-1),he=["disabled","value"],Se=S({__name:"ImportUser",setup(a){var p;const e=I({content:"",show:!1}),{isLoading:t,importUsers:n}=ue(),{semesters:o}=F();function c(){var f;e.show=!1;const m=(f=document.getElementById("importUserFile").files)==null?void 0:f[0];m?n(m,r.value,_=>{_.status===200?e.content="Import success":e.content=_.data??"Import failed",e.show=!0}):(e.content="Please select a file",e.show=!0)}const d=I({name:"Semester",options:o.value.map(i=>i.name),values:o.value.map(i=>i.id.toString())}),r=y(((p=d.values)==null?void 0:p[0])??"");return(i,m)=>(s(),l("div",null,[fe,_e,ve,u("form",{onSubmit:E(c,["prevent"])},[Ce,u("div",null,[g(G,{config:d,"onUpdate:value":m[0]||(m[0]=f=>r.value=f)},null,8,["config"])]),u("div",null,[g(T,{config:e},null,8,["config"]),u("input",{type:"submit",disabled:h(t)===!0,value:h(t)===!1?"Import Users":"Importing"},null,8,he)])],40,ge)]))}}),ye={key:0},be={key:1},we=["disabled"],$e={key:2},Ie=S({__name:"ViewUser",setup(a){const{isLoading:e,data:t,getData:n,clearCache:o,hasMore:c}=ie();n();const d=V(()=>({title:"Users",headers:["Name","Directory ID","Group","Role"],rows:t.value.map(r=>[{elementType:"text",value:j(r)},{elementType:"text",value:r.did},{elementType:"text",value:r.group_name??""},{elementType:"text",value:r.role}])}));return(r,p)=>(s(),l("div",null,[u("div",null,[h(e)===!0?(s(),l("div",ye,"Fetching Data...")):h(t)&&h(t).length>0?(s(),l("div",be,[g(W,{"table-config":d.value},null,8,["table-config"]),u("button",{class:"normalButton",onClick:p[0]||(p[0]=(...i)=>h(n)&&h(n)(...i)),disabled:h(c)===!1},b(h(c)?"View more":"No more records"),9,we)])):(s(),l("div",$e,"No user data available at this time."))])]))}}),ke=u("h4",null,"Create a semester",-1),De=["onSubmit"],Ue=u("div",null,[u("input",{type:"submit",value:"Create semester"})],-1),Ve=S({__name:"CreateSemester",setup(a){const{createSemester:e,clearCache:t,getSemesters:n}=F(),o=new Date,d={name:"Year",options:Array.from({length:3},(v,C)=>o.getFullYear()+C).map(v=>v.toString())},p={name:"Season",options:["Spring","Summer","Fall"]},i=y(d.options[0]),m=y(p.options[0]),f=I({content:"",show:!1,textAlign:"left"});function _(){e(i.value,m.value,v=>{f.show=!0,v.status===200?f.content="Create semester success":f.content=v.data??"Create semester failed"}),t(),n()}return(v,C)=>(s(),l("div",null,[ke,u("form",{onSubmit:E(_,["prevent"])},[g(G,{config:d,"onUpdate:value":C[0]||(C[0]=B=>i.value=B)}),g(G,{config:p,"onUpdate:value":C[1]||(C[1]=B=>m.value=B)}),g(T,{config:f},null,8,["config"]),Ue],40,De)]))}}),Ge={key:0,class:"customInputLable"},Be=["placeholder","value"],Le=S({__name:"CustomInputfield",props:{config:{}},emits:["update:value"],setup(a){return(e,t)=>(s(),l("div",null,[e.config.label?(s(),l("label",Ge,b(e.config.label),1)):U("",!0),e.config.type==="text"?(s(),l("input",{key:1,type:"text",placeholder:e.config.placeholder??"",value:e.config.defaultValue??"",onInput:t[0]||(t[0]=n=>e.$emit("update:value",n.target.value))},null,40,Be)):U("",!0)]))}});const Me=k(Le,[["__scopeId","data-v-e04b7aa4"]]),Ne=["disabled"],Te=["disabled"],Fe=S({__name:"StatefulButton",props:{config:{}},setup(a){return(e,t)=>{var n,o;return e.config.htmlClass?(s(),l("button",{key:0,class:q(e.config.htmlClass),disabled:((o=(n=e.config).disabled)==null?void 0:o.call(n))??!1,onClick:t[0]||(t[0]=(...c)=>e.config.onClick&&e.config.onClick(...c))},b(e.config.text),11,Ne)):(s(),l("button",{key:1,disabled:e.config.disabled(),onClick:t[1]||(t[1]=(...c)=>e.config.onClick&&e.config.onClick(...c))},b(e.config.text),9,Te))}}}),Oe=u("h3",null,"Create Group",-1),Ee=S({__name:"CreateGroup",setup(a){var m,f;const{semesters:e}=F(),{createGroup:t,isCreatingGroup:n}=X(),o={name:"Semester",options:e.value.map(_=>_.name),values:e.value.map(_=>_.id.toString())},c={label:"Number of groups",type:"text",placeholder:"Number of groups",defaultValue:"20"},r={text:V(()=>n.value===!0?"Creating...":"Create").value,disabled:()=>n.value===!0,htmlClass:"normalButton",onClick:()=>{t(p.semesterId,p.numberOfGroups,_=>{_.status===200?(i.content="Groups created successfully",i.show=!0):(i.content=_.data??"Error creating groups",i.show=!0)})}},p=I({semesterId:(f=(m=e.value)==null?void 0:m[0])==null?void 0:f.id.toString(),numberOfGroups:"20"}),i=I({content:"",type:"error",show:!1});return(_,v)=>(s(),l("div",null,[Oe,g(G,{config:o,"onUpdate:value":v[0]||(v[0]=C=>p.semesterId=C)}),g(Me,{config:c,"onUpdate:value":v[1]||(v[1]=C=>p.numberOfGroups=C)}),g(T,{config:i},null,8,["config"]),g(Fe,{config:r})]))}}),Ae=a=>(J("data-v-9d4c7572"),a=a(),Q(),a),He={id:"manageViewContainer",class:"contentViewContainer"},Pe={id:"manageButtonContainer"},Ye=Ae(()=>u("hr",{class:"lv2Hr"},null,-1)),xe={id:"manageModuleContainer"},Ke=S({__name:"ManageView",setup(a){const{isLoading:e,data:t,hasMore:n,getData:o}=P();o();const c=V(()=>e.value===!0?["Loading..."]:t.value.map(p=>p.name)),d=V(()=>[{name:"User",options:["View users","Import users"]},{name:"Group",options:["View groups","Create groups"]},{name:"Case",options:c.value},{name:"Semester",options:["Create semester"]},{name:"System",options:["Config"]}]),r=y("");return(p,i)=>(s(),l("div",He,[u("div",Pe,[g(ne,{"select-configs":d.value,flexDir:"row","onUpdate:value":i[0]||(i[0]=m=>{r.value=m})},null,8,["select-configs"])]),Ye,u("div",xe,[(s(),w(z,null,[r.value==="Import users"?(s(),w(Se,{key:0})):r.value==="View users"?(s(),w(Ie,{key:1})):r.value==="Food center"?(s(),w(le,{key:2})):r.value==="Create semester"?(s(),w(Ve,{key:3})):r.value==="Create groups"?(s(),w(Ee,{key:4})):U("",!0)],1024))])]))}});const Qe=k(Ke,[["__scopeId","data-v-9d4c7572"]]);export{Qe as default};
